<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • LandR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-5');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LandR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PredictiveEcology/LandR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/PredictiveEcology/LandR/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.2" id="landr-112">LandR 1.1.2<a class="anchor" aria-label="anchor" href="#landr-112"></a></h2>
<ul><li>unlink NTEMS file (24 GB) after use in <code><a href="../reference/prepInputs_NTEMS_LCC_FAO.html">prepInputs_NTEMS_LCC_FAO()</a></code>;</li>
<li>update Quebec PSP column in <code>speciesEquivalencies_CA</code>;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.1" id="landr-111">LandR 1.1.1<a class="anchor" aria-label="anchor" href="#landr-111"></a></h2>
<ul><li>more conversion from <code>raster</code> to <code>terra</code> throughout;</li>
<li>remove <code>gdalUtilities</code> dependency;</li>
<li>fix bug in <code>prepInputLCC</code>: <code>orig</code> argument no longer accepted by <code><a href="https://rspatial.github.io/terra/reference/compareGeom.html" class="external-link">terra::compareGeom</a></code>;</li>
<li>fix bug in <code>calcSeverityB</code>: output table was missing the proportion of B killed;</li>
<li>new functions used to estimate maximum biomass (<code>maxB</code>) and species establishment probabilities (<code>SEP</code>);</li>
<li>new function to update the <code>speciesEcoregion</code> table (brought over from <code>Biomass_speciesParameters</code> module), using estimated <code>inflationFactor</code> and <code>mANPPproportion</code> to adjust <code>maxB</code> and <code>maxANPP</code>, respectively;</li>
<li>new functions to simulate disturbances - <code>FireDisturbance</code> and <code>FireDisturbancePM</code> pulled from; <code>Biomass_regeneration</code> and <code>Biomass_regenerationPM</code> modules, respectively;</li>
<li>
<code><a href="../reference/overlayLCCs.html">overlayLCCs()</a></code> now works correctly with terra (<a href="https://github.com/PredictiveEcology/LandR/issues/99" class="external-link">#99</a>);</li>
<li>fixed partial argument match warnings (<a href="https://github.com/PredictiveEcology/LandR/issues/100" class="external-link">#100</a>);</li>
<li>new function <code><a href="../reference/standAgeMapGenerator.html">standAgeMapGenerator()</a></code> to produce <code>standAgeMap</code> from <code>cohortData</code>;</li>
<li>new functions <code><a href="../reference/prepInputs_NTEMS_Nonforest.html">prepInputs_NTEMS_Nonforest()</a></code> and <code><a href="../reference/prepInputs_NTEMS_LCC_FAO.html">prepInputs_NTEMS_LCC_FAO()</a></code>;</li>
<li>add new assertions: <code><a href="../reference/assertions.html">assertSpeciesTable()</a></code> and <code><a href="../reference/assertions.html">assertSpeciesTableRaw()</a></code>;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.0" id="landr-110">LandR 1.1.0<a class="anchor" aria-label="anchor" href="#landr-110"></a></h2>
<ul><li>move LandWeb-specific functions to <code>LandWebUtils</code> package (<a href="https://github.com/PredictiveEcology/LandR/issues/86" class="external-link">#86</a>)</li>
<li>
<code>Colors</code> – new function to help with <code>terra</code> migration.</li>
<li>
<code>prepInputsFireYear</code> can now handle <code>rasterToMatch</code> that is a <code>SpatRaster</code>
</li>
<li>drop support for R &lt; 4.2 due to change in dependency package <code>MuMIn</code> (Sept 2022)</li>
<li>new functions to download a set of default biogeoclimatic variables used across several modules, and subset data layers from different time periods according to a year. These functions may only be here temporarily.</li>
<li>new <code>raster</code>/<code>terra</code> utility and plotting functions</li>
<li>new functions related to producing default permafrost input data for modules. These functions may only be here temporarily.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.9" id="landr-109">LandR 1.0.9<a class="anchor" aria-label="anchor" href="#landr-109"></a></h2>
<ul><li>new function: <code>nonForestedPixels</code> used to detect pixels without species cover or a non-forested land-cover class;</li>
<li>new function: <code>prepRawBiomassMap</code> used to create <code>rawBiomassMap</code>;</li>
<li>new function: <code>prepRasterToMatch</code> used to create <code>RasterToMatch</code> and <code>RasterToMatchLarge</code>;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.8" id="landr-108">LandR 1.0.8<a class="anchor" aria-label="anchor" href="#landr-108"></a></h2>
<ul><li>drop support for R 3.6</li>
<li>
<code>prepInputsStandAgeMap</code>can now accept <code>firePerimeters</code> layer, avoiding inner download if layer is present;</li>
<li>new assertion (<code>assertSppVectors</code>) to check that species match between vectors (e.g. tables, colours and species list vector);</li>
<li>new function <code>sppHarmonize</code> that deals with the 3 potential ways for a user to input the <code>sim$sppEquiv</code>, <code>P(sim)$sppEquivCol</code>, and <code>sim$sppNameVector</code>;</li>
<li>update Eliot’s email address;</li>
<li>new functions: <code>speciesInStudyArea</code> and `species;</li>
<li>remove undeclared dependency package <code>Require</code>;</li>
<li>age imputation in <code>makeAndCleanInitialCohortData</code> can now be turned off;</li>
<li>fix bug in <code><a href="../reference/LANDISDisp.html">LANDISDisp()</a></code>: skip dispersal when <code>src</code> or <code>rcv</code> data.tables are empty;</li>
<li>initial cohort biomass (calculated in <code>.initiateNewCohorts</code>) can now be a fixed integer or, as before, calculated using the LANDIS-II Biomass Succession Extension v3.2.1 approach (Scheller &amp; Miranda 2015);</li>
<li>fix bug in <code><a href="../reference/prepInputsFireYear.html">prepInputsFireYear()</a></code>;</li>
<li>drop single-level factor terms in <code>statsModel</code>;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.7" id="landr-107">LandR 1.0.7<a class="anchor" aria-label="anchor" href="#landr-107"></a></h2>
<ul><li>Several changes to accommodate the tracking and optional removal of pixels; data suffered data imputation in <code>Biomass_borealDataPrep</code>;</li>
<li>
<code>assertColumns</code> gives better message for which columns are incorrect/missing;</li>
<li>
<code>minRelativeBDefaults</code> is now a function so they are more easily accessible ;</li>
<li>
<code>statsModel</code> was pulling along with it all the data, 5x. Now it does not. The Caching of this should be fast and small now.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.5" id="landr-105">LandR 1.0.5<a class="anchor" aria-label="anchor" href="#landr-105"></a></h2>
<ul><li>Support for refitting <code>modelBiomass</code> (see <code>Biomass_boreaDataPrep</code>) with scaled data or different optimizer;</li>
<li>Changes to <code>loadkNNSpeciesLayers</code> and <code>prepSpeciesLayers_KNN</code> prevent issues when default URL is down, or working offline (but layers are present locally);</li>
<li>Several changes to accommodate LCC 2010 dataset;</li>
<li>New columns to <code>sppEquivalenciesCA</code> (<code>PSP</code>, <code>BC_Forestry</code> and <code>FuelClass</code>);</li>
<li>Lowered values of dummy <code>rawBiomassMap</code>;</li>
<li>passing <code>fireURL = NULL</code> to <code>prepStandAgeMap()</code> bypasses age imputation;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.4" id="landr-104">LandR 1.0.4<a class="anchor" aria-label="anchor" href="#landr-104"></a></h2>
<ul><li>New assertion for validation data;</li>
<li>New function <code>sppEquivCheck</code>;</li>
<li>
<code>loadKNNSpeciesLayers</code> can accept a <code>sppEquiv</code> table with one column</li>
<li>Improved documentation for <code>speciesEquivalencies_CA</code> data;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.3" id="landr-103">LandR 1.0.3<a class="anchor" aria-label="anchor" href="#landr-103"></a></h2>
<ul><li>new function to calculate fire severity as biomass loss;</li>
<li>bug fixes and improvements to to <code>speciesTableUpdate</code>;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.2" id="landr-102">LandR 1.0.2<a class="anchor" aria-label="anchor" href="#landr-102"></a></h2>
<ul><li>Fixes and further speed improvements to seed dispersal functions and general code cleaning;</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.1" id="landr-101">LandR 1.0.1<a class="anchor" aria-label="anchor" href="#landr-101"></a></h2>
<ul><li>Complete rewrite of <code>LANDISDisp</code> now (back to) native R. It is about 15x faster than the Rcpp implementation, and much simpler, with about 30% of the number of lines of code. It was inspired by the “spiral” approach as was used in the Rcpp in the pre-1.0.0 version of <code>LandR</code>, but much more efficiently as it is now correctly identifies <em>every</em> pixel outward from a centre pixel using <code><a href="https://rdrr.io/pkg/raster/man/focalWeight.html" class="external-link">raster::focalWeight</a></code>, with the maximum of the <code>seeddispersal_max</code> across all species. RAM use appears under control, even for large problems (tested on 50M pixel Raster with 8M potential Source pixels and 500,000 Receiving pixels, with a peak additional RAM of 3 GB during <code>LANDISDisp</code>); <code>LANDISDisp</code> now accommodates sub-<code>cellSize</code> dispersal distances, using the original Ward Dispersal equation. Previously, the sub-pixel dispersal was treated as if it was starting from the centre of the pixel. So, if less than a full pixel, then very little horizontal transfer. This has the effect that there will be a large increase in horizontal transfer for the species that have small <code>seeddistance_max</code> (i.e., less than cell size);</li>
<li>add new function <code>prepSpeciesLayers_ONFRI</code>;</li>
</ul><div class="section level3">
<h3 id="bugfixes-1-0-1">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-1-0-1"></a></h3>
<ul><li>
<code>LANDISDisp</code> did not correctly handle <code>speciesCode</code> when it is a factor. This is a common possibility. It now handles these correctly.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.5" id="landr-005">LandR 0.0.5<a class="anchor" aria-label="anchor" href="#landr-005"></a></h2>
<ul><li>new function <code>updateSpeciesTable</code> (moved from <code>LandWebUtils</code>) to allow user to update species parameters by passing a named list.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.4" id="landr-004">LandR 0.0.4<a class="anchor" aria-label="anchor" href="#landr-004"></a></h2>
<ul><li>
<code>assignLightProb</code> now allows interpolating germination probability between species shade tolerance levels for any given stand shade value. This allows for for decimal values in species shade tolerance traits and greater fine tuning of shade-related germination probabilities.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.3" id="landr-003">LandR 0.0.3<a class="anchor" aria-label="anchor" href="#landr-003"></a></h2>
<ul><li>rounding of age classes and biomass now occurs only inside <code>makeCohortDataFiles</code>, as it is the last thing to do before making <code>cohortData</code>
</li>
<li>rounding of age and biomass has been taken out of 3 other functions – <code>.createCohortData</code>, <code>makeAndCleanInitialCohortData</code> , and a hard coded bit in <code>Biomass_borealDataPrep</code>
</li>
<li>updated source for kNN databases (now using v1, instead of v0) - this involved changes in the URLs and how the data is downloaded;</li>
<li>
<code>statsModel</code> function has a new argument to improve caching with <code><a href="https://reproducible.predictiveecology.org/reference/Cache.html" class="external-link">reproducible::Cache</a></code> (i.e. not used internally);</li>
<li>function arguments that where previously called <code>time</code>, are now called <code>currentTime</code> - these changes are matched in <code>LandR</code> Biomass modules</li>
<li>minor code clean-ups/bugfixes and improved clarity</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.2" id="landr-002">LandR 0.0.2<a class="anchor" aria-label="anchor" href="#landr-002"></a></h2>
<ul><li>Bug fixes in imports (DESCRIPTION)</li>
<li>new function <code>overlayLCCs</code> which will help with overlaying more than one land cover classification raster.</li>
<li>major revisions to <code>convertUnwantedLCC</code> to accommodate more cases and eliminate redundant arguments.</li>
<li>
<code><a href="../reference/prepInputsLCC.html">prepInputsLCC()</a></code> now works with “LCC10”</li>
</ul></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eliot J B McIntire, Alex M Chubaty, Ceres Barros, Ian M S Eddy.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

